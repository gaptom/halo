rebuild index piph6specialoperationreq_0 error,error:index row size 2808 exceeds btree version 4 maximum 2704 for index "piph6specialoperationreq_0" DETAIL: Index row references tuple (8386,36) in relation "ph6specialoperationreq". HINT: Values larger than 1/3 of a buffer page cannot be indexed. Consider a function index of an MD5 hash of the value, or use full text indexing.

2.索引
发现 oracle 到 PG14 中关于 ph6specialoperationreq 与 ph6notice1 表的索引创建失败，报了index row size 2808 exceeds btree version 4 maximum 2704 for index 'ph6specialoperationreq_0' and 'ph6notice1_0' 错误，想建上去的话，更改索引类型，gin索引 修改如下：

create extension pg_trgm;
create index ph6specialoperationreq_0 on ph6specialoperationreq using gin (PVAL_0 gin_trgm_ops);
create index ph6notice1_0 on ph6notice1 gin (PVAL_0 gin_trgm_ops)


AND i.index_type != 'LOB'
AND i.index_name NOT LIKE 'SYS_%'
AND i.index_name NOT LIKE 'ISEQ$$_%'
AND i.index_name NOT LIKE 'SYS_IOT%'

SELECT c.relname AS table_name, i.relname AS index_name
FROM pg_class c
JOIN pg_index idx ON c.oid = idx.indrelid
JOIN pg_class i ON i.oid = idx.indexrelid
JOIN pg_namespace n ON n.oid = c.relnamespace
WHERE n.nspname = 'your_schema_name' -- 将 "your_schema_name" 替换为您的架构名称
  AND c.relkind = 'r' -- 仅包括普通表（排除视图等）
  AND i.relkind = 'i' -- 仅包括索引
  AND c.relname NOT LIKE 'pg_%' -- 排除系统表
  AND c.relname NOT LIKE 'sql_%' -- 排除系统表
  AND c.relname NOT LIKE 'information_%' -- 排除系统表
  AND c.relname NOT LIKE 'pg_toast%' -- 排除 TOAST 表
ORDER BY c.relname, i.relname;

SELECT i.index_name, i.table_name
FROM all_indexes i
JOIN all_tables t ON i.table_name = t.table_name
WHERE t.owner = 'your_username' -- 将 "your_username" 替换为您的用户名
AND i.owner = 'your_username' -- 将 "your_username" 替换为您的用户名
AND i.index_type != 'LOB'
AND i.index_name NOT LIKE 'SYS_%'
AND i.index_name NOT LIKE 'ISEQ$$_%'
AND i.index_name NOT LIKE 'SYS_IOT%'
ORDER BY i.table_name, i.index_name;


  select * from dblink('dbname=tc_test', 'select sequence_name from information_schema.sequences where sequence_schema= ''public''') as t(table_name varchar(100))
except 
select * from dblink('dbname=tc', 'select sequence_name from information_schema.sequences where sequence_schema= ''public'''
) as t(table_name varchar(100));  312说明序列没有相同名字


tablename               oracle_count      pg_count 
PFND0MAX_VALUE_REASON	19685             19683
PPOM_OBJECT	        1691250621        1691250620
POM_M_LOCK	        2                 1
POM_LOCK_KEYS	        1737626114        1737626113
POM_LOCK_LOGGING	20                24
POM_R_LOCK	        6                 3
POM_TIMESTAMP	        99597             104141
SCRATCH_TABLE	        2734189550        2734189543


pg_dump -U YOUR_USERNAME -h YOUR_HOSTNAME -d YOUR_DATABASE_NAME --section=pre-data --section=post-data --section=triggers --file=triggers.sql
