rebuild index piph6specialoperationreq_0 error,error:index row size 2808 exceeds btree version 4 maximum 2704 for index "piph6specialoperationreq_0" DETAIL: Index row references tuple (8386,36) in relation "ph6specialoperationreq". HINT: Values larger than 1/3 of a buffer page cannot be indexed. Consider a function index of an MD5 hash of the value, or use full text indexing.

2.索引
发现 oracle 到 PG14 中关于 ph6specialoperationreq 与 ph6notice1 表的索引创建失败，报了index row size 2808 exceeds btree version 4 maximum 2704 for index 'ph6specialoperationreq_0' and 'ph6notice1_0' 错误，想建上去的话，更改索引类型，gin索引 修改如下：

create extension pg_trgm;
create index ph6specialoperationreq_0 on ph6specialoperationreq using gin (PVAL_0 gin_trgm_ops);
create index ph6notice1_0 on ph6notice1 gin (PVAL_0 gin_trgm_ops)


AND i.index_type != 'LOB'
AND i.index_name NOT LIKE 'SYS_%'
AND i.index_name NOT LIKE 'ISEQ$$_%'
AND i.index_name NOT LIKE 'SYS_IOT%'

SELECT c.relname AS table_name, i.relname AS index_name
FROM pg_class c
JOIN pg_index idx ON c.oid = idx.indrelid
JOIN pg_class i ON i.oid = idx.indexrelid
JOIN pg_namespace n ON n.oid = c.relnamespace
WHERE n.nspname = 'your_schema_name' -- 将 "your_schema_name" 替换为您的架构名称
  AND c.relkind = 'r' -- 仅包括普通表（排除视图等）
  AND i.relkind = 'i' -- 仅包括索引
  AND c.relname NOT LIKE 'pg_%' -- 排除系统表
  AND c.relname NOT LIKE 'sql_%' -- 排除系统表
  AND c.relname NOT LIKE 'information_%' -- 排除系统表
  AND c.relname NOT LIKE 'pg_toast%' -- 排除 TOAST 表
ORDER BY c.relname, i.relname;

SELECT i.index_name, i.table_name
FROM all_indexes i
JOIN all_tables t ON i.table_name = t.table_name
WHERE t.owner = 'your_username' -- 将 "your_username" 替换为您的用户名
AND i.owner = 'your_username' -- 将 "your_username" 替换为您的用户名
AND i.index_type != 'LOB'
AND i.index_name NOT LIKE 'SYS_%'
AND i.index_name NOT LIKE 'ISEQ$$_%'
AND i.index_name NOT LIKE 'SYS_IOT%'
ORDER BY i.table_name, i.index_name;


tc=# create schema eim_uids;
ERROR:  schema "eim_uids" already exists
tc=# \d ppom_object
                                                          Table "public.ppom_object"
       Column       |            Type             | Collation | Nullable |                               Default
--------------------+-----------------------------+-----------+----------+---------------------------------------------------------------------
 puid               | character varying(15)       |           | not null |
 ptimestamp         | character varying(33)       |           | not null |
 ppid               | bigint                      |           | not null |
 rowning_siteu      | character varying(15)       |           |          |
 rowning_sitec      | bigint                      |           |          |
 plsd               | timestamp without time zone |           |          |
 pobject_properties | bigint                      |           | not null |
 aoid               | character varying(15)       |           | not null |
 arev_category      | bigint                      |           | not null | 48
 aspace_uid         | character varying(15)       |           |          |
 avalid_from        | timestamp without time zone |           | not null | to_date('1900/01/02 00:00:00'::text, 'YYYY/MM/DD HH24:MI:SS'::text)
 avalid_to          | timestamp without time zone |           |          |
Indexes:
    "pippom_object" UNIQUE, btree (puid)
    "pippom_object_0" btree (aoid)
    "pippom_object_1" btree (aspace_uid)
Triggers:
    fast_sync_add_trigger BEFORE INSERT ON ppom_object FOR EACH ROW EXECUTE FUNCTION trigger_fct_fast_sync_add_trigger()
    fast_sync_delete_trigger AFTER DELETE ON ppom_object FOR EACH ROW EXECUTE FUNCTION trigger_fct_fast_sync_delete_trigger()

tc=#
